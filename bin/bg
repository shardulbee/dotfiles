#!/usr/bin/env bash
set -e

session=""
[[ "$1" == "-t" ]] && { session="$2"; shift 2; }

[[ -z "$session" ]] && session=$(tmux list-sessions -F '#{session_name}' 2>/dev/null | fzf || echo "bg-$$")

tmux has-session -t "$session" 2>/dev/null || tmux new-session -d -s "$session"
tmux new-window -t "$session" "$@"
